[tox]
envlist = py312-xb-zb, py312-xl-zl, py312-xb-zl, py312-xl-zb, py313, py314, pkg
skip_missing_interpreters = true
isolated_build = true

[testenv]
deps =
  pytest>=8.0.0
  pytest-cov>=5.0.0
  xb: xarray==2024.9.0
  xl: xarray
  zb: zarr==3.0.0
  zl: zarr
  py313,py314: xarray
  py313,py314: zarr
commands = pytest

[testenv:pkg]
description = Build distribution artifacts and verify metadata
skip_install = true
deps =
  build>=1.2.2
  twine>=5.1.1
commands =
  python -m build
  python -m twine check dist/*
